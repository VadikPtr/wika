@using WikaApp.Auth
@inherits LayoutComponentBase

<main>
  <div class="container pt-2">
    @if (http_context.is_authenticated())
    {
      <div class="d-flex flex-row align-items-center mt-2 mb-3">
        <NavLink class="nav-link flex-grow-1 ps-0" href="/" Match="NavLinkMatch.All">
          <h2 class="mb-0">Wika</h2>
        </NavLink>
        <img class="rounded me-2" src="@http_context.get_picture()" alt="picture" width="32" height="32"/>
        <span class="me-3">@http_context.get_name()</span>
        <NavLink class="nav-link me-3" href="/users" Match="NavLinkMatch.All">
          Users
        </NavLink>
        <NavLink class="nav-link" href="/auth/logout" Match="NavLinkMatch.All">
          Logout
        </NavLink>
      </div>
    }
    @Body
  </div>
</main>

<div id="blazor-error-ui">
  An unhandled error has occurred.
  <a href="" class="reload">Reload</a>
  <a class="dismiss">x</a>
</div>

@code
{
  [CascadingParameter] public HttpContext http_context { get; set; } = null!;
}